<title>Dashboard | Vidyut</title>
<script src="/static/js/login.js"></script>
{% extends "dash/dash.html" %}

{% block body %}
<link rel="stylesheet" href="/static/css/dash/attendee_dash.css">
    <div class="dash-container">
      <div class="dash-content">
        <div class="dash-meta-data">
          <div>
              <img src="https://devhub.amblygon.org/static/QR/{{user.data.vid}}.png">
              <h1>{{ user.data.fname }} {% if user.data.lname %} {{user.data.lname}} {% endif %}</h1><br>
              <h2>V19{{ '%04d' % user.data.vid }}</h2>
          </div>
        </div>
        <div class="registered">
              <div class="registered-workshops">
                <h2>Registered workshops</h2>
              </div>
              <div class="registered-events">
                <h2>Registered events</h2>
              </div>
              <div>
                <h2>Purchased Addons</h2>
                {% for i in purchases %}
                <div class="eventItem2" >
                    <div class="eventmeta"> {{ '%03d' % i.get('purid') }} </div>
                    <div class ="eventdata">
                        <span class = "talkHead">{{ i.get('purchase') }} ({{ i.get('qty') }})</span><br>
                        <span class="meta"> Rs. {{ i.get('total') }} - {{ i.get('purtime') }}</span>
                    </div>
                </div>
                {% endfor %}
              </div>
          </div>
      </div>
    </div>
    <script>
      $(document).ready(function(){
        $('.dash-profile').empty();
        $('.dash-profile').append('<input type="submit" class="logout" value="Logout">');
        $('.logout').click(function() {
          console.log("TESTING");
          revokeAccess();
        });
      })

      $.getJSON("/events/data/registered/", function(data) {
        console.log(data);
        $.each(data, function(key, value) {
          var large = '<p>'+value.title+'</p>';
          if(value.cat == 1)
            $(".registered-workshops").append(large);
          else
          $(".registered-events").append(large);
        });
      });
    </script>
  </body>
<script async defer src="https://apis.google.com/js/api.js" onload="this.onload=function(){};handleClientLoad()" onreadystatechange="if (this.readyState === 'complete') this.onload()"></script>
{% endblock %}
