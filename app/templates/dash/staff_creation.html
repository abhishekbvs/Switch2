<link rel="stylesheet" href="/static/css/education.css">

<div class ="form-container-full">
  
  <form class="st-form" novalidate>
    
    <h1>Staff creation</h1>

    <div style="margin-top: 20px" id="div-gender">
      <div class="gender">
        <label class="gender-choose" style="position: static;">Gender</label>
      </div>
      <div class="gender-dropdown">
        <a id="1">web</a>
        <a id="2">workshops</a>
        <a id="3">talks</a>
        <a id="4">contests</a>
      </div>
    </div> 
    
    <div class="float-label" id="div-level">
        <input id="level" name="level" autocomplete="off" required type="text">
        <label for="level">Level</label>
     </div>

    <div class = "action-button">
      <input id="submit" type="submit" name="submit" value="Proceed">
      <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" class = "loading" height="35px" viewBox="0 0 100 100"><defs><style>.cls-1{fill:none;stroke:#0277BD;stroke-miterlimit:10;stroke-width:10px;}</style></defs><title>loading-b</title><path class="cls-1" d="M48.13,6.5761A43.4641,43.4641,0,1,1,6.5761,51.87"><animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0 50 50" to="360 50 50" dur="1s" repeatCount="indefinite"/></path></svg>
    </div>

  </form>

</div>

<script>
  
  $(document).ready(function(){

    var gender;

    $('body').click(function(e){
      if($(e.target).closest('#div-gender').length)
        return;
      $(".gender-dropdown").removeClass("show");
    })
    
    $('.gender').click(function(){
      $('.gender-dropdown').addClass("show")
    });

    $('.gender-dropdown a').click(function(){
      gender = $(this).attr('id');
      $('.gender label').html($(this).text());
      $('.gender-choose').css('opacity', '1');
      $('.gender-choose').css('color', '#000');  
      $(".gender-dropdown").removeClass("show");
    });


    $('#submit').click(function(e){

      $('.loading').css('visibility', 'visible');
      
      $('.float-label').removeClass('error-field');
      $('.error').css('display', 'none');
      
      console.log("Posting details form");

      $.ajax({
        type: "POST",
        url: "/staff/creation",
        data:{ 
          csrf_token: "{{ form.csrf_token._value() }}",
          fname: $('#fname').val(),
          lname: $('#lname').val(),
          sex: gender,
          phno: parseInt($('#mobile').val())
        },
        success: function(data){

          $('.loading').css('visibility', 'hidden');

          console.log("Return value = " + data);

          if(data != "success"){
          
          }
          else  
            window.location.href="/dash/lounge"
          
        }

      });

      e.preventDefault();
    
    });

  });

</script>
