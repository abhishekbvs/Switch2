<!DOCTYPE html>
<html>
  <head>
  	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS Stlyes -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400|Source+Sans+Pro" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/menu.css">
    <link rel="stylesheet" href="/static/fonts/fonts.css">
    <link rel="stylesheet" href="/static/css/overlays.css">
    <link rel="stylesheet" href="/static/css/workshops/workshops.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.nicescroll/3.6.8-fix/jquery.nicescroll.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="/static/js/mobile-check.js"></script>
    <script src="/static/js/navbar.js"></script>
    <script src="/static/js/login.js"></script>
    <script>
    	$(document).ready(function(){
        $('.header').css('background-color','#fff');
        $('.menu-button').addClass('change');
        $('.menuVidyut').removeClass('color-change');
        $('.login').addClass('color-change');
        $('.login').addClass('border-change');
    	});
    </script>
  </head>

  <body>
  	<div class = "load"></div>
    <div class = "load-d"></div>
    
  	{% include 'navbar.html' %}
    
    <div class="workshopContainer">
      
      <span class = "heading">Contests</span> 
      <!-- <div class = "filter">Deparment</div> -->
      
      <div class = "gridContainer">
      	
      </div>
  	  
  	  <title> Contests | Vidyut </title>

    </div>
  </body>

  <!-- Scripts -->
    
    <script>
    	
    	$(window).on('load', function(){
        
        $.getJSON("/events/data/contests/", function(data){
          
          console.log(data);
          
          $.each(data, function(key, value) {
            var workshopItem = '<div class = "workshopItem" id = "' + value.id + '"><div style = "background: url(\'/static/images/wtc.jpg\'); background-size: cover; background-position: center;" class = "w-t-image"></div><div class = "w-t-description" style = "padding: 10px 0px 10px"><h1>' + value.title +'</h1><span class = "w-t-d-content">' + value.short +'</span></div></div>';
            $(".gridContainer").append(workshopItem);
          })
          
          $('.workshopItem').click(function(){
            openLoad();

            pageurl = $(this).attr('id');

            $('.header').css('opacity','0');
            $('.header').css('visibility','hidden');

            window.setTimeout(function(){
              $('.workshopContainer').load('/contests/'+pageurl+'?m=1', function(responseTxt, statusTxt, xhr){
                closeLoad();
              });
            }, 500);

            window.history.pushState(pageurl,pageurl, pageurl);

            $(window).bind('popstate', function(){
              console.log("popstate = " + history.state);
            });           

            });
          });

          var open = "{{open}}"
          if(open == "True"){
            openLoad();
            pageurl = "{{cid}}";

              $('.header').css('opacity','0');
              $('.header').css('visibility','hidden');

            window.setTimeout(function(){
              $('.workshopContainer').load('/contests/'+pageurl+'?m=1', function(responseTxt, statusTxt, xhr){
                closeLoad();
              });
            }, 500);
            
            $(window).bind('popstate', function(){
              window.location.href="/contests/"
            });           
          }

        });
		

    	$(document).ready(function(){
        
        	normal_scroll = false;
        	$('.content-wrapper').css('background-color','#fff');

      	});
    </script>
</html>